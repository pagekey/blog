<!DOCTYPE html><html class="2xl:text-[20px]" dir="ltr" lang="en"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1" name="viewport"><link href="/sitemap-index.xml" rel="sitemap"><link href="/_astro/favicon.EoKXths8.ico" rel="shortcut icon"><link href="/_astro/favicon.Ca94UIdJ.svg" rel="icon" type="image/svg+xml"><link href="/_astro/favicon.Ca94UIdJ.svg" rel="mask-icon" color="#8D46E7"><link href="/_astro/apple-touch-icon.Ctlcgf5O.png" rel="apple-touch-icon" sizes="180x180"><style>:root{--aw-font-sans:'InterVariable';--aw-font-serif:'InterVariable';--aw-font-heading:'InterVariable';--aw-color-primary:rgb(1 97 239);--aw-color-secondary:rgb(1 84 207);--aw-color-accent:rgb(109 40 217);--aw-color-text-heading:rgb(0 0 0);--aw-color-text-default:rgb(16 16 16);--aw-color-text-muted:rgb(16 16 16 / 66%);--aw-color-bg-page:rgb(255 255 255);--aw-color-bg-page-dark:rgb(3 6 32)}.dark{--aw-color-primary:rgb(1 97 239);--aw-color-secondary:rgb(1 84 207);--aw-color-accent:rgb(109 40 217);--aw-color-text-heading:rgb(247, 248, 248);--aw-color-text-default:rgb(229 236 246);--aw-color-text-muted:rgb(229 236 246 / 66%);--aw-color-bg-page:rgb(3 6 32)}.katex-html{display:none}html{--pagefind-ui-scale:1;--pagefind-ui-primary:rgb(1 97 239);--pagefind-ui-text:rgb(16 16 16);--pagefind-ui-background:rgb(255 255 255);--pagefind-ui-border:rgb(16 16 16 / 66%);--pagefind-ui-tag:rgb(16 16 16 / 66%);--pagefind-ui-border-width:2px;--pagefind-ui-border-radius:8px;--pagefind-ui-image-border-radius:8px;--pagefind-ui-image-box-ratio:3/2;--pagefind-ui-font:sans-serif}html.dark{--pagefind-ui-scale:1;--pagefind-ui-primary:rgb(1 97 239);--pagefind-ui-text:rgb(229 236 246);--pagefind-ui-background:rgb(3 6 32);--pagefind-ui-border:rgb(229 236 246 / 66%);--pagefind-ui-tag:rgb(229 236 246 / 66%);--pagefind-ui-border-width:2px;--pagefind-ui-border-radius:8px;--pagefind-ui-image-border-radius:8px;--pagefind-ui-image-box-ratio:3/2;--pagefind-ui-font:sans-serif}html.dark .pagefind-ui button{color:rgb(229 236 246)}html.dark .pagefind-ui button:hover{color:rgb(229 236 246);border-color:rgb(229 236 246)}.header-read{color:gray}</style><script>!function(){const e="system";function t(e){"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const t=document.querySelectorAll("[data-aw-toggle-color-scheme] > input");t&&t.length&&t.forEach((t=>{t.checked="dark"!==e}))}e&&e.endsWith(":only")||(localStorage.theme,0)?t(e.replace(":only","")):"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):t("light")}()</script><title>OS22: The VGA Rabbit Hole ‚Äî PageKey</title><meta content="üöÄ Let&#39;s take back tech." name="description"/><meta content="index,follow" name="robots"/><link href="https://pagekey.io/blog/2024/pkos/22" rel="canonical"/><meta content="OS22: The VGA Rabbit Hole" property="og:title"/><meta content="üöÄ Let&#39;s take back tech." property="og:description"/><meta content="https://pagekey.io/blog/2024/pkos/22" property="og:url"/><meta content="article" property="og:type"/><meta content="http://i3.ytimg.com/vi/bTpE3gleXOo/hqdefault.jpg" property="og:image"/><meta content="en" property="og:locale"/><meta content="PageKey" property="og:site_name"/><meta content="summary_large_image" name="twitter:card"/><meta content="@onwidget" name="twitter:site"/><meta content="@onwidget" name="twitter:creator"/><meta content="orcPxI47GSa-cRvY11tUe6iGg2IO_RPvnA1q95iEM3M" name="google-site-verification"><link href="/_astro/_page_.BDj0p3vH.css" rel="stylesheet"><style>#blog-sidebar[data-astro-cid-wo4vtnkt]{display:none;padding:1rem;position:relative}@media screen and (min-width:72rem){#blog-sidebar[data-astro-cid-wo4vtnkt]{display:block}}</style></head><body class="antialiased bg-page text-default tracking-tight"><div id="top"></div><header class="mx-auto w-full border-b border-gray-50/0 ease-in-out flex-none sticky top-0 transition-[opacity] z-40" data-aw-sticky-header id="header"><div class="absolute inset-0"></div><div class="mx-auto w-full max-w-7xl md:flex md:justify-between md:px-6 px-3 py-3 relative text-default"><div class="flex justify-between"><a href="/" class="flex items-center"><span class="font-bold dark:text-white md:text-xl ml-2 rtl:ml-0 rtl:mr-2 self-center text-2xl text-gray-900 whitespace-nowrap"><span id="pks-daily-emoji">üîë</span> PageKey</span><script>function getDailyEmoji(){const e=new Date,t=60*e.getTimezoneOffset()*1e3,n=e.getTime()-t,i=["üìÑ","üîë","üå©","üó£","üöÅ","üõé","üò≥","üêã","üìà","üöÄ","üõ∞Ô∏è","üì¢","üêò","üèÜ","üîã","ü¶Ä","üçç","üçá","‚õ∞","üêß","üéà"];return i[Math.floor(n/864e5)%i.length]}window.addEventListener("DOMContentLoaded",(()=>{document.getElementById("pks-daily-emoji").innerHTML=getDailyEmoji()}))</script></a><div class="flex items-center md:hidden"><button class="flex flex-col cursor-pointer group h-12 items-center justify-center rounded w-12" aria-label="Toggle Menu" data-aw-toggle-menu><span class="sr-only">Toggle Menu</span> <span class="transition duration-200 bg-black dark:bg-white ease h-0.5 my-1 opacity-80 rounded-full transform w-6 group-[.expanded]:rotate-45 group-[.expanded]:translate-y-2.5" aria-hidden="true"></span> <span class="transition duration-200 bg-black dark:bg-white ease h-0.5 my-1 opacity-80 rounded-full transform w-6 group-[.expanded]:opacity-0" aria-hidden="true"></span> <span class="transition duration-200 bg-black dark:bg-white ease h-0.5 my-1 opacity-80 rounded-full transform w-6 group-[.expanded]:-rotate-45 group-[.expanded]:-translate-y-2.5" aria-hidden="true"></span></button></div></div><nav aria-label="Main navigation" class="items-center md:w-auto w-full hidden md:flex md:mx-5 md:overflow-x-auto md:overflow-y-visible overflow-x-hidden overflow-y-auto text-default"><ul class="flex flex-col font-medium md:flex-row md:self-center md:text-[0.9375rem] md:w-auto text-xl tracking-[0.01rem] w-full"><li class=""><a href="/" class="flex px-4 dark:hover:text-white hover:text-link py-3 items-centers">Home</a></li><li class="dropdown"><button class="flex items-center dark:hover:text-white hover:text-link px-4 py-3">Products <svg class="rtl:ml-0 h-3.5 hidden md:inline ml-0.5 rtl:mr-0.5 w-3.5" data-icon="tabler:chevron-down" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:chevron-down"><path d="m6 9l6 6l6-6" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:chevron-down"></use></svg></button><ul class="dark:md:bg-dark drop-shadow-xl dropdown-menu font-medium md:absolute md:backdrop-blur-md md:bg-white/90 md:hidden md:min-w-[200px] md:pl-0 pl-4 rounded"><li><a href="/products/boom" class="dark:hover:text-white hover:text-link block dark:hover:bg-gray-700 first:rounded-t last:rounded-b md:hover:bg-gray-100 px-5 py-2 whitespace-no-wrap">üí£ Boom Languages</a></li><li><a href="/products/keydo" class="dark:hover:text-white hover:text-link block dark:hover:bg-gray-700 first:rounded-t last:rounded-b md:hover:bg-gray-100 px-5 py-2 whitespace-no-wrap">‚úÖ KeyDo</a></li><li><a href="/products/pkos" class="dark:hover:text-white hover:text-link block dark:hover:bg-gray-700 first:rounded-t last:rounded-b md:hover:bg-gray-100 px-5 py-2 whitespace-no-wrap">üíª PageKey Operating System</a></li><li><a href="/products/pkvid" class="dark:hover:text-white hover:text-link block dark:hover:bg-gray-700 first:rounded-t last:rounded-b md:hover:bg-gray-100 px-5 py-2 whitespace-no-wrap">üé• PKVid</a></li><li><a href="/products/ptd" class="dark:hover:text-white hover:text-link block dark:hover:bg-gray-700 first:rounded-t last:rounded-b md:hover:bg-gray-100 px-5 py-2 whitespace-no-wrap">üéπ Plaintext DAW</a></li></ul></li><li class=""><a href="/blog" class="flex px-4 dark:hover:text-white hover:text-link py-3 items-centers">Blog</a></li><li class=""><a href="/team" class="flex px-4 dark:hover:text-white hover:text-link py-3 items-centers">Team</a></li></ul></nav><div class="items-center md:w-auto w-full hidden md:flex bottom-0 fixed justify-end left-0 md:mb-0 md:p-0 md:self-center md:static p-3 rtl:left-auto rtl:right-0"><div class="flex items-center justify-between md:w-auto w-full"><div class="flex"><button class="text-muted dark:text-gray-400 dark:focus:ring-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 hover:bg-gray-100 inline-flex items-center p-2.5 rounded-lg text-sm" aria-label="Toggle between Dark and Light mode" data-aw-toggle-color-scheme type="button"><svg class="w-6 h-6 md:h-5 md:inline-block md:w-5" data-icon="tabler:sun" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:sun"><path d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7l-.7.7m0 11.4l.7.7m-12.1-.7l-.7.7" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:sun"></use></svg></button> <a href="/search" class="text-muted dark:text-gray-400 dark:focus:ring-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 hover:bg-gray-100 inline-flex items-center p-2.5 rounded-lg text-sm" aria-label="Search"><svg class="h-5 w-5" data-icon="tabler:search" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:search"><path d="M3 10a7 7 0 1 0 14 0a7 7 0 1 0-14 0m18 11l-6-6" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:search"></use></svg></a></div></div></div></div></header><main><script>var topOffset=0;window.addEventListener("load",(function(){const e=window.getComputedStyle(document.getElementById("single-post-section"),null).getPropertyValue("padding-top").replace("px",""),t=document.getElementById("header").getBoundingClientRect().height;topOffset=parseInt(e)+1.5*t;document.querySelectorAll("#post-content h2, #post-content h3").forEach((function(e){console.log(e.tagName),"H2"==e.tagName?document.getElementById("ul-contents").innerHTML+=`<li id="li-${e.id}"><a href="#${e.id}">${e.innerText}</a></li>`:"H3"==e.tagName&&(document.getElementById("ul-contents").innerHTML+=`<li id="li-${e.id}" class='ml-4'><a href="#${e.id}">${e.innerText}</a></li>`)}))})),window.addEventListener("scroll",(function(e){window.scrollY>topOffset?document.getElementById("blog-sidebar").style.top=window.scrollY-topOffset/2+"px":document.getElementById("blog-sidebar").style.top="0";document.querySelectorAll("#post-content h2, #post-content h3").forEach((function(e){window.scrollY>e.offsetTop?document.getElementById(`li-${e.id}`).classList.add("header-read"):document.getElementById(`li-${e.id}`).classList.remove("header-read")}))}))</script><section class="flex lg:py-20 justify-center mx-auto py-8 sm:py-16" data-astro-cid-wo4vtnkt id="single-post-section"><article data-astro-cid-wo4vtnkt id="single-post"><header class="" data-astro-cid-wo4vtnkt><div class="mb-2 flex flex-col justify-between max-w-3xl mt-0 mx-auto px-4 sm:flex-row sm:items-center sm:px-6" data-astro-cid-wo4vtnkt><p data-astro-cid-wo4vtnkt><svg class="inline-block -mt-0.5 dark:text-gray-400 h-4 w-4" data-icon="tabler:clock" height="1em" viewBox="0 0 24 24" width="1em" data-astro-cid-wo4vtnkt><symbol id="ai:tabler:clock"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0"/><path d="M12 7v5l3 3"/></g></symbol><use xlink:href="#ai:tabler:clock"></use></svg> <time class="inline-block" data-astro-cid-wo4vtnkt datetime="Wed Feb 28 2024 00:00:00 GMT+0000 (Coordinated Universal Time)">Feb 28, 2024</time> ¬∑ <svg class="inline-block -mt-0.5 dark:text-gray-400 h-4 w-4" data-icon="tabler:user" height="1em" viewBox="0 0 24 24" width="1em" data-astro-cid-wo4vtnkt><symbol id="ai:tabler:user"><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0-8 0M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:user"></use></svg> <span class="inline-block" data-astro-cid-wo4vtnkt>Steve Grice</span> ¬∑ <a href="/category/pagekey-operating-system" class="inline-block capitalize hover:underline" data-astro-cid-wo4vtnkt>pagekey operating system </a>&nbsp;¬∑ <span data-astro-cid-wo4vtnkt>9</span> min read</p></div><h1 class="mx-auto sm:px-6 max-w-3xl px-4 font-bold font-heading leading-tighter md:text-5xl text-4xl tracking-tighter" data-astro-cid-wo4vtnkt>OS22: The VGA Rabbit Hole</h1><p class="text-muted dark:text-slate-400 max-w-3xl mb-8 md:text-2xl mt-4 mx-auto px-4 sm:px-6 text-justify text-xl" data-astro-cid-wo4vtnkt></p><img alt="" decoding="async" height="506" loading="eager" src="http://i3.ytimg.com/vi/bTpE3gleXOo/hqdefault.jpg" width="900" class="mx-auto bg-gray-400 dark:bg-slate-700 lg:max-w-[900px] max-w-full mb-6 sm:rounded-md" sizes="(max-width: 900px) 400px, 900px" style="object-fit:cover;object-position:center;max-width:900px;max-height:506px;aspect-ratio:1.7786561264822134;width:100%" data-astro-cid-wo4vtnkt></header><div class="mx-auto sm:px-6 max-w-3xl px-6 mt-8 dark:prose-a:text-blue-400 dark:prose-headings:text-slate-300 dark:prose-invert lg:prose-xl prose prose-a:text-primary prose-headings:font-bold prose-headings:font-heading prose-headings:leading-tighter prose-headings:scroll-mt-[80px] prose-headings:tracking-tighter prose-img:rounded-md prose-img:shadow-lg prose-md" data-astro-cid-wo4vtnkt id="post-content"><p>If you‚Äôve been watching for the past few days, you‚Äôd notice that we‚Äôve been grinding on VGA. Thankfully, it‚Äôs not just me - this stuff is tough! In fact, OSDev wiki notes that, back in the day, knowing your way around VGA was enough to establish ‚Äúquite a reputation‚Äù <sup><a href="#user-content-fn-1" aria-describedby="footnote-label" data-footnote-ref="" id="user-content-fnref-1">1</a></sup>.</p><p>Thankfully, with the help of people who joined the stream, we were able to get to the point where we can draw on <em>most</em> of the screen using memory-mapped I/O, and can escape graphics mode by hitting escape without ruining the text-mode graphics.</p><p>At the end, I threw in a quick rectangle animation just for fun (which cannot be interrupted).</p><p>See issue <a href="https://gitlab.com/pagekey/apps/pkos/pkos/-/issues/2">#2</a> and MR <a href="https://gitlab.com/pagekey/apps/pkos/pkos/-/merge_requests/2">!2</a> on GitLab for the code discussed in this post.</p><div class="w-full overflow-hidden text-center"><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen frameborder="0" height="315" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/bTpE3gleXOo" style="margin:auto;border-radius:10px" title="YouTube video player" width="560"></iframe></div><h2 id="motivation">Motivation</h2><p>In OS15, we were able to get the screen drawing working, but unable to get back into text mode. Afterward, the code was changed to allow exiting back to text mode, but the actual VGA mode looked terrible and did not seem to support normal drawing. The goal of this post was to fix that.</p><h3 id="how-it-looked-in-os15">How It Looked in OS15</h3><p><img alt="OS15: When VGA worked" decoding="async" height="906" loading="lazy" src="/_astro/01-os15.D9Fp26p2_1eonmi.webp" width="1270"></p><p>This is what we‚Äôre going for - just a canvas that you can draw pixels on.</p><p>Here‚Äôs a <a href="https://gitlab.com/pagekey/apps/pkos/pkos/-/blob/aec21a2e2b9b481a6883ce0843a7c1bd77e537b9/src/vga/vga.c#L9">link</a> to the VGA register values used in the working implementation.</p><h3 id="before">Before</h3><p>I ended up changing the main branch at some point to allow you to get back into text mode without brekaing anything when you hit ESC. Unfortunately, this completely scrambled our drawings:</p><p><img alt="Graphics Mode, Before" decoding="async" height="886" loading="lazy" src="/_astro/02-before.DaZCdBij_qzLJd.webp" width="1262"></p><p>Thanks to Dominik Szasz on Discord for pointing this out.</p><h3 id="after">After</h3><p>After much effort, we got to the point where you can switch back and forth and do some custom drawing. There‚Äôs one problem, though:</p><p><img alt="Graphics Mode, After" decoding="async" height="914" loading="lazy" src="/_astro/03-after.Cbg1rCxU_Z2hio2M.webp" width="1274"></p><p>The vertically striped areas of the screen must be left alone, or the font will be corrupted when you switch back to text mode. Everything else can be freely drawn upon with no negative effects.</p><p>Here‚Äôs a bonus, a fun pic from along the way when some values got set incorrectly:</p><p><img alt="Graphics Mode, Bonus" decoding="async" height="459" loading="lazy" src="/_astro/04-bonus.BBwf4KbE_18Aa2Y.webp" width="639"></p><h2 id="overview-of-vga-registers">Overview of VGA Registers</h2><p>There are several groups of VGA registers, each representing a separate subsystem (once a separate chip for each, but usually all-in-one for modern cards). The groups include External/General, Sequencer, Attribute Controller (AC), Graphics Controller (GC), and Cathode Ray Tube Controller (CRTC) registers. While each group has its own idiosyncracies, the technique for getting and setting the values of these registers is mostly the same across the board.</p><h3 id="getting-and-settings-values">Getting and Settings Values</h3><p>VGA introduces the concept of separate registers for address and data. Since VGA has a ton of registers and I/O address space is at a premium, this approach lets you access dozens of registers using only a few I/O addresses. Here‚Äôs how it works.</p><ol><li><p>Get the value of the address register and save it in a variable. This is important in case you‚Äôre on an interrupt routine and someone else was using that register for something else.</p></li><li><p>Write the address register with the index of the data you‚Äôd like to read.</p></li><li><p>For <em>getting</em> the value, read the data port. For <em>setting</em> the value, write your value to the data port.</p></li><li><p>Restore the address register by writing the value you saved from step 1 to the address port.</p></li></ol><p>All of these operations use the <code>in</code> and <code>out</code> assembly instructions to interact with the CPU‚Äôs I/O address space (the I/O ports).</p><h4 id="io-select-bit-monocolor">I/O Select Bit (Mono/Color)</h4><p>A fun little detail of some of the registers was that the I/O address changed based on whether the system was in monochrome or color mode. You can detect which mode the system is in using a bit in the External/General registers.</p><p>My solution to this was to check this bit and conditionally use either the MONO or COLOR address constant based on whether the bit was <code>0</code> or <code>1</code>.</p><h4 id="ac-register">AC Register</h4><p>Another strange idiosyncracy noted in the OSDev Wiki was that the Attribute Controller‚Äôs Attribute Address Register <sup><a href="#user-content-fn-2" aria-describedby="footnote-label" data-footnote-ref="" id="user-content-fnref-2">2</a></sup>, located at <code>0x3C0</code>, can be used for both input and output. To get around this, you must first <em>read</em> port <code>0x3DA</code> to ensure that <code>0x3C0</code> is in the <em>read</em> state, then you can use it as a normal address register. <sup><a href="#user-content-fn-3" aria-describedby="footnote-label" data-footnote-ref="" id="user-content-fnref-3">3</a></sup></p><h2 id="lessons-learned">Lessons Learned</h2><p>I learned a lot of lessons from trying to make this happen. The main one is that VGA is difficult and usually doesn‚Äôt act how you‚Äôd think it would!</p><h3 id="not-a-state-machine">Not a State Machine</h3><p>First, VGA is not a state machine. Intuitively, it would make sense that if you read every single register and save the values, then the graphics card would behave the same when you re-write those values back to all the registers, right?</p><p>It turns out that this assumption is wrong. I‚Äôm not sure exactly what happens, but at some point, writing to one register affects the values of others. The order in which you write the register values seems to make a difference.</p><h4 id="the-flavors-of-the-subsystems">The Flavors of the Subsystems</h4><p>As I wrote the ‚Äúdriver‚Äù for each litle subsystem of VGA, I found that while they are all similar, each had its own ‚Äúflavor.‚Äù Here‚Äôs my impression of each:</p><ul><li><p><strong>Graphics Controller (GC)</strong>: Started here - convert existing VGA code to use our drivers</p></li><li><p><strong>Attribute Controller (AC)</strong>: Very similar to GC but has palette</p></li><li><p><strong>External/General</strong>:</p><ul><li>Had to do before CRTC b/c CRTC reg #‚Äòs dependent on this one</li><li>First exposure to conditional register #‚Äòs</li><li>Has some weird read-only function registers</li></ul></li><li><p><strong>Cathode Ray Tube Controller (CRTC)</strong>: See EXT, needed an input bit from it to tell mono vs color</p></li><li><p><strong>Sequencer</strong>: Short, similar to GC approach. Easy to mess everything up by accident with this one.</p></li></ul><h3 id="text-mode-attribute-byte">Text Mode Attribute Byte</h3><p>Another blatant error in the code was forgetting to set the color attribute byte when printing characters to the screen. The result was a completely black screen when returning to text mode.</p><p>It turns out that when you clear the screen in graphics mode by setting all bytes to <code>0</code>, you‚Äôre setting the text-mode attribute bytes back to <code>0</code> as well. As a result, when I tried to ‚Äútype‚Äù things to the screen, I was setting the text value, but the font color was black (on a black background), so nothing was visible.</p><p>The solution was to be sure to set <strong>both</strong> the character value and the color attribute byte when printing text to the screen. This change is reflected in <code>src/screen/screen.c</code>.</p><p>Thank you to Brigita Yantie for her questions during the stream - if she hadn‚Äôt have asked about this, I wouldn‚Äôt have found it!</p><h3 id="vga-font-basics">VGA Font Basics</h3><p>While the details are still a mystery, I am aware of the basics of VGA fonts:</p><ul><li>Each character seems to be represented by 128 bits, or 16 bytes</li><li>The characters are displayed on the screen as 8x16 pixels, so each <code>0</code> represents background color and each <code>1</code> represents foreground color.</li><li>Overwriting VGA characters in memory seems to mess everything up.</li></ul><h3 id="memcpy-woes---jons-address-breakthrough">Memcpy Woes - Jon‚Äôs Address Breakthrough</h3><p>I spent a lot of time trying different ways of copying memory to back up the current state of the text-mode video memory. I have a working <code>memcpy</code> function that relies on the x86 <code>movsb</code> instruction. It seemed to work, but backing up the video memory wasn‚Äôt working as expected.</p><p>Instead, I wrote a for loop to copy each byte individually - this still did not work.</p><p>Thankfully, Jon Strong was on the stream, and he recommended that I change the address to which I was backing up the data. I initially chose what I thought was a very high address, unlikely to be used by anything else: <code>0x10b8000</code>. I also tried <code>0x1b8000</code>. However, it wasn‚Äôt until I used Jon‚Äôs suggestion of <code>0x1b800</code> as the backup address that things started to behave fairly normally.</p><h2 id="the-fix---beating-around-the-bush">The ‚ÄúFix‚Äù - Beating Around the Bush</h2><p>Once the memory backup/restore was working fairly well, I started drawing on different parts of the screen and switching back to text mode to see what went wrong. Clearing the entire screen always corrupted all of the fonts, so that text mode was nothing more than a black screen. However, clearing just a quarter or half of the screen resulted in some characters being blanked out, but others remaining available.</p><p>I was able to find where the characters are mapped in VGA memory and modify them directly.</p><p>I was also able to modify <em>all</em> the memory around these characters with no issues when returning to text mode.</p><p>But for some reason that defies explanation, any changes I made to these font memory locations could not be undone by simply writing the old values back to that area.</p><p>So for now, you can use about 80% of the screen to draw whatever you want, but you‚Äôre stuck with a colorful stripe where the fonts live - change this, and you‚Äôll have a hard time returning to text mode.</p><h2 id="next-steps">Next Steps</h2><p>This VGA exploration really did a number on me - I‚Äôm tired of looking into this! That being said, there are a few things left to try, keeping in mind the ultimate goal of having an easy-to-use, functional PKOS canvas that doesn‚Äôt mess up text mode.</p><h3 id="brute-forcing-the-font-back">Brute Forcing the Font Back</h3><p>Something is going wrong when modifying the addresses containing font information, but what? The only way I can think to debug is to start with one character and go from there. If I modify the <code>&#39;A&#39;</code> character in VGA mode, but then write back the exact value for an <code>&#39;A&#39;</code>, what happens?</p><h3 id="vesa-more-modern-better-docs">VESA: More modern, better docs?</h3><p>Jon Strong recommended looking into VESA, which, while less widely-supported than VGA, has more modern docs and is supposedly much easier to use.</p><h3 id="other-projects-eventually-filesystem">Other Projects, eventually Filesystem</h3><p>I need to take a break from PKOS after this and work on <a href="https://gitlab.com/pagekey/apps/boom/boom-ce">Boom Languages CE</a>. Once that‚Äôs up and running, it will probably make sense to plan a roadmap for PKOS. People seem to have a lot of enthusiasm for this project, so if I can break things up in a way that others can contribute, too, we could make a lot of progress in a short amount of time!</p><p>I think the main priority is being able to interact with hard drives for mass storage. I don‚Äôt even think a filesystem is necessary, just some kind of persistent storage would be a game-changer. This would open the door to storing programs and compiling them on PKOS, which could eventually lead to writing PKOS code <strong>on PKOS</strong>!</p><h2 id="reference">Reference</h2><p>Most of the reference material can be found in the notes folder of this blog post on GitLab. Other sources are linked directly in the relevant source code.</p><h3 id="related-pagekey-streams">Related PageKey Streams</h3><p>I started livestreaming PageKey videos recently, as an experiment, and it seems to work well! Here are the livestreams that led to the progress described in this video:</p><ul><li><a href="https://youtube.com/live/isS3ALwlpPo">Custom OS Dust-Off (PKOS!) - Stream 7</a></li><li><a href="https://youtube.com/live/Gd9qGMlqYfc">PKOS: Finishing up VGA Improvements - Stream 8</a></li><li><a href="https://youtube.com/live/WKel56TQTpY">Pesky VGA‚Ä¶ (PKOS) - Stream 9</a></li><li><a href="https://youtube.com/live/e69PKM1xR1o">VGA Fonts, are they the key? - Stream 10</a></li><li><a href="https://youtube.com/live/bcMMHG8sw60">More VGA (and Fonts) - Stream 11</a></li><li><a href="https://youtube.com/live/FSSLmEiymKQ">VGA End Game - Stream 12</a></li></ul><section class="footnotes" data-footnotes=""><h2 id="footnote-label" class="sr-only">Footnotes</h2><ol><li id="user-content-fn-1"><p><a href="https://wiki.osdev.org/VGA_Hardware#Overview">https://wiki.osdev.org/VGA_Hardware#Overview</a> <a href="#user-content-fnref-1" class="data-footnote-backref" aria-label="Back to reference 1" data-footnote-backref="">‚Ü©</a></p></li><li id="user-content-fn-2"><p><a href="http://www.osdever.net/FreeVGA/vga/attrreg.htm">http://www.osdever.net/FreeVGA/vga/attrreg.htm</a> <a href="#user-content-fnref-2" class="data-footnote-backref" aria-label="Back to reference 2" data-footnote-backref="">‚Ü©</a></p></li><li id="user-content-fn-3"><p><a href="https://wiki.osdev.org/VGA_Hardware#Port_0x3C0">https://wiki.osdev.org/VGA_Hardware#Port_0x3C0</a> <a href="#user-content-fnref-3" class="data-footnote-backref" aria-label="Back to reference 3" data-footnote-backref="">‚Ü©</a></p></li></ol></section></div><div class="flex flex-col justify-between max-w-3xl mx-auto sm:flex-row sm:px-6 mt-8 px-6" data-astro-cid-wo4vtnkt><ul class="mr-5 rtl:ml-5 rtl:mr-0"><li class="mb-2 font-medium bg-gray-100 dark:bg-slate-700 inline-block lowercase mr-2 px-2 py-0.5 rtl:ml-2 rtl:mr-0"><a href="/tag/c" class="text-muted dark:hover:text-gray-200 dark:text-slate-300 hover:text-primary">c</a></li></ul><div class="align-middle dark:text-slate-600 mt-5 sm:mt-1 text-gray-500"><span class="font-bold align-super dark:text-slate-400 text-gray-400">Share:</span> <button class="rtl:ml-0 ml-2 rtl:mr-2" data-aw-social-share="twitter" data-aw-url="https://pagekey.io/blog/2024/pkos/22" title="Twitter Share" data-aw-text="OS22: The VGA Rabbit Hole"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" data-icon="tabler:brand-x" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:brand-x"><path d="m4 4l11.733 16H20L8.267 4zm0 16l6.768-6.768m2.46-2.46L20 4" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:brand-x"></use></svg></button> <button class="rtl:ml-0 ml-2 rtl:mr-2" data-aw-social-share="facebook" data-aw-url="https://pagekey.io/blog/2024/pkos/22" title="Facebook Share"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" data-icon="tabler:brand-facebook" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:brand-facebook"><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 0 1 1-1h3V3h-3a5 5 0 0 0-5 5v2z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:brand-facebook"></use></svg></button> <button class="rtl:ml-0 ml-2 rtl:mr-2" data-aw-social-share="linkedin" data-aw-url="https://pagekey.io/blog/2024/pkos/22" title="Linkedin Share" data-aw-text="OS22: The VGA Rabbit Hole"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" data-icon="tabler:brand-linkedin" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:brand-linkedin"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm4 5v5m0-8v.01M12 16v-5"/><path d="M16 16v-3a2 2 0 0 0-4 0"/></g></symbol><use xlink:href="#ai:tabler:brand-linkedin"></use></svg></button> <button class="rtl:ml-0 ml-2 rtl:mr-2" data-aw-social-share="whatsapp" data-aw-url="https://pagekey.io/blog/2024/pkos/22" title="Whatsapp Share" data-aw-text="OS22: The VGA Rabbit Hole"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" data-icon="tabler:brand-whatsapp" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:brand-whatsapp"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m3 21l1.65-3.8a9 9 0 1 1 3.4 2.9z"/><path d="M9 10a.5.5 0 0 0 1 0V9a.5.5 0 0 0-1 0za5 5 0 0 0 5 5h1a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1"/></g></symbol><use xlink:href="#ai:tabler:brand-whatsapp"></use></svg></button> <button class="rtl:ml-0 ml-2 rtl:mr-2" data-aw-social-share="mail" data-aw-url="https://pagekey.io/blog/2024/pkos/22" title="Email Share" data-aw-text="OS22: The VGA Rabbit Hole"><svg class="w-6 h-6 dark:hover:text-slate-300 dark:text-slate-500 hover:text-black text-gray-400" data-icon="tabler:mail" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:mail"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="m3 7l9 6l9-6"/></g></symbol><use xlink:href="#ai:tabler:mail"></use></svg></button></div></div></article><div data-astro-cid-wo4vtnkt id="blog-sidebar"><b data-astro-cid-wo4vtnkt>Contents</b><ul data-astro-cid-wo4vtnkt id="ul-contents"><li data-astro-cid-wo4vtnkt><a href="#top" data-astro-cid-wo4vtnkt>Top</a></li></ul></div></section><div class="mx-auto sm:px-6 max-w-3xl px-6 md:pb-20 md:pt-4 pb-12 pt-8"><a href="/blog" class="btn btn-tertiary md:px-3 px-3"><svg class="h-5 w-5 -ml-1.5 mr-1 rtl:-mr-1.5 rtl:ml-1" data-icon="tabler:chevron-left" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:chevron-left"><path d="m15 6l-6 6l6 6" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:chevron-left"></use></svg> Back to Blog</a></div><section class="relative not-prose scroll-mt-[72px]"><div class="absolute inset-0 pointer-events-none -z-[1]" aria-hidden="true"><div class="absolute inset-0"></div></div><div class="mx-auto px-4 max-w-7xl relative lg:pt-0 lg:py-20 md:pt-0 md:px-6 md:py-16 pt-0 py-12 text-default"><div class="flex flex-col lg:flex-row lg:justify-between mb-8"><div class="md:max-w-sm"><h2 class="mb-2 font-bold font-heading group sm:leading-none sm:text-4xl text-3xl tracking-tight">Related Posts</h2><a href="/blog" class="text-muted transition block dark:text-slate-400 duration-200 ease-in hover:text-primary lg:mb-0 mb-6">View All Posts ¬ª</a></div></div><div class="grid -mb-6 gap-6 lg:grid-cols-4 md:grid-cols-2 row-gap-5"><article class="transition mb-6"><div class="dark:bg-slate-700 bg-gray-400 rounded shadow-lg mb-6 md:h-64 relative"><a href="/blog/2024/stream/17"><img alt="PKOS: PIIX3 Time? - Stream 17" decoding="async" height="225" loading="lazy" src="http://i3.ytimg.com/vi/Lbsu3q3CuUc/hqdefault.jpg" width="400" class="w-full bg-gray-400 dark:bg-slate-700 md:h-full rounded shadow-lg" sizes="(max-width: 900px) 400px, 900px" style="object-fit:cover;object-position:center;max-width:100%;max-height:100%"></a></div><h3 class="mb-2 font-bold font-heading leading-tight sm:text-2xl text-xl"><a href="/blog/2024/stream/17" class="transition duration-200 ease-in hover:text-primary dark:hover:text-blue-700">PKOS: PIIX3 Time? - Stream 17</a></h3><p class="text-muted dark:text-slate-400 text-lg"></p></article><article class="transition mb-6"><div class="dark:bg-slate-700 bg-gray-400 rounded shadow-lg mb-6 md:h-64 relative"><a href="/blog/2020/90-sec/opengl-glut-linux"><img alt="‚â§90s: First OpenGL Program with GLUT (Linux)" decoding="async" height="225" loading="lazy" src="http://i3.ytimg.com/vi/cShqFtmDTQE/hqdefault.jpg" width="400" class="w-full bg-gray-400 dark:bg-slate-700 md:h-full rounded shadow-lg" sizes="(max-width: 900px) 400px, 900px" style="object-fit:cover;object-position:center;max-width:100%;max-height:100%"></a></div><h3 class="mb-2 font-bold font-heading leading-tight sm:text-2xl text-xl"><a href="/blog/2020/90-sec/opengl-glut-linux" class="transition duration-200 ease-in hover:text-primary dark:hover:text-blue-700">‚â§90s: First OpenGL Program with GLUT (Linux)</a></h3><p class="text-muted dark:text-slate-400 text-lg"></p></article><article class="transition mb-6"><div class="dark:bg-slate-700 bg-gray-400 rounded shadow-lg mb-6 md:h-64 relative"><a href="/blog/2020/pkos/10"><img alt="OS10: Running on Real Hardware" decoding="async" height="225" loading="lazy" src="http://i3.ytimg.com/vi/-V-eKSKwexs/hqdefault.jpg" width="400" class="w-full bg-gray-400 dark:bg-slate-700 md:h-full rounded shadow-lg" sizes="(max-width: 900px) 400px, 900px" style="object-fit:cover;object-position:center;max-width:100%;max-height:100%"></a></div><h3 class="mb-2 font-bold font-heading leading-tight sm:text-2xl text-xl"><a href="/blog/2020/pkos/10" class="transition duration-200 ease-in hover:text-primary dark:hover:text-blue-700">OS10: Running on Real Hardware</a></h3><p class="text-muted dark:text-slate-400 text-lg"></p></article><article class="transition mb-6"><div class="dark:bg-slate-700 bg-gray-400 rounded shadow-lg mb-6 md:h-64 relative"><a href="/blog/2024/stream/12"><img alt="VGA End Game - Stream 12" decoding="async" height="225" loading="lazy" src="http://i3.ytimg.com/vi/FSSLmEiymKQ/hqdefault.jpg" width="400" class="w-full bg-gray-400 dark:bg-slate-700 md:h-full rounded shadow-lg" sizes="(max-width: 900px) 400px, 900px" style="object-fit:cover;object-position:center;max-width:100%;max-height:100%"></a></div><h3 class="mb-2 font-bold font-heading leading-tight sm:text-2xl text-xl"><a href="/blog/2024/stream/12" class="transition duration-200 ease-in hover:text-primary dark:hover:text-blue-700">VGA End Game - Stream 12</a></h3><p class="text-muted dark:text-slate-400 text-lg"></p></article></div></div></section></main><footer class="relative not-prose border-gray-200 border-t dark:border-slate-800"><div class="absolute inset-0 pointer-events-none dark:bg-dark" aria-hidden="true"></div><div class="mx-auto sm:px-6 px-4 dark:text-slate-300 max-w-7xl relative"><div class="grid gap-4 gap-y-8 grid-cols-12 md:py-12 py-8 sm:gap-8"><div class="col-span-12 lg:col-span-4"><div class="mb-2"><a href="/" class="font-bold text-xl inline-block">PageKey</a></div><div class="text-muted text-sm"></div></div><div class="col-span-6 lg:col-span-2 md:col-span-3"><div class="mb-2 font-medium dark:text-gray-300">Products</div><ul class="text-sm"><li class="mb-2"><a href="/products/boom" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">Boom Languages</a></li><li class="mb-2"><a href="/products/keydo" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">KeyDo</a></li><li class="mb-2"><a href="/products/keyreader" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">KeyReader</a></li><li class="mb-2"><a href="/products/pkos" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">PageKey Operating System</a></li><li class="mb-2"><a href="/products/pkvid" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">PKVid</a></li><li class="mb-2"><a href="/products/ptd" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">Plaintext DAW</a></li></ul></div><div class="col-span-6 lg:col-span-2 md:col-span-3"><div class="mb-2 font-medium dark:text-gray-300">Community</div><ul class="text-sm"><li class="mb-2"><a href="https://github.com/pagekey" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">GitHub</a></li><li class="mb-2"><a href="https://discord.gg/5m5yFgDPF5" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">Discord</a></li><li class="mb-2"><a href="https://youtube.com/@PageKey" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">YouTube</a></li></ul></div><div class="col-span-6 lg:col-span-2 md:col-span-3"><div class="mb-2 font-medium dark:text-gray-300">Tags</div><ul class="text-sm"><li class="mb-2"><a href="/blog/tags" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">All Tags</a></li><li class="mb-2"><a href="/tag/python" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">Python</a></li><li class="mb-2"><a href="/tag/rust" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">Rust</a></li></ul></div><div class="col-span-6 lg:col-span-2 md:col-span-3"><div class="mb-2 font-medium dark:text-gray-300">Languages</div><ul class="text-sm"><li class="mb-2"><a href="/blog" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">English</a></li><li class="mb-2"><a href="/tag/spanish" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">Espa√±ol</a></li><li class="mb-2"><a href="/tag/russian" class="text-muted dark:text-gray-400 duration-150 ease-in-out hover:text-gray-700 hover:underline transition">–†—É—Å—Å–∫–∏–π</a></li></ul></div></div><div class="md:items-center md:flex md:justify-between md:py-8 py-6"><ul class="flex -ml-2 mb-4 md:mb-0 md:ml-4 md:order-1 rtl:-mr-2 rtl:md:ml-0 rtl:md:mr-4 rtl:ml-0"><li><a href="https://discord.gg/5m5yFgDPF5" class="text-muted dark:text-gray-400 dark:focus:ring-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 hover:bg-gray-100 inline-flex items-center p-2.5 rounded-lg text-sm" aria-label="Discord"><svg class="h-5 w-5" data-icon="tabler:brand-discord" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:brand-discord"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M8 12a1 1 0 1 0 2 0a1 1 0 0 0-2 0m6 0a1 1 0 1 0 2 0a1 1 0 0 0-2 0"/><path d="M15.5 17c0 1 1.5 3 2 3c1.5 0 2.833-1.667 3.5-3c.667-1.667.5-5.833-1.5-11.5c-1.457-1.015-3-1.34-4.5-1.5l-.972 1.923a11.913 11.913 0 0 0-4.053 0L9 4c-1.5.16-3.043.485-4.5 1.5c-2 5.667-2.167 9.833-1.5 11.5c.667 1.333 2 3 3.5 3c.5 0 2-2 2-3"/><path d="M7 16.5c3.5 1 6.5 1 10 0"/></g></symbol><use xlink:href="#ai:tabler:brand-discord"></use></svg></a></li><li><a href="https://youtube.com/@PageKey" class="text-muted dark:text-gray-400 dark:focus:ring-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 hover:bg-gray-100 inline-flex items-center p-2.5 rounded-lg text-sm" aria-label="YouTube"><svg class="h-5 w-5" data-icon="tabler:brand-youtube" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:brand-youtube"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M2 8a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4z"/><path d="m10 9l5 3l-5 3z"/></g></symbol><use xlink:href="#ai:tabler:brand-youtube"></use></svg></a></li><li><a href="https://github.com/pagekey" class="text-muted dark:text-gray-400 dark:focus:ring-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 hover:bg-gray-100 inline-flex items-center p-2.5 rounded-lg text-sm" aria-label="Github"><svg class="h-5 w-5" data-icon="tabler:brand-github" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:brand-github"><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2c2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2a4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2 0 0 0-.1 3.2A4.6 4.6 0 0 0 4 9.5c0 4.6 2.7 5.7 5.5 6c-.6.6-.6 1.2-.5 2V21" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:brand-github"></use></svg></a></li><li><a href="https://instagram.com/pagekeysolutions" class="text-muted dark:text-gray-400 dark:focus:ring-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 hover:bg-gray-100 inline-flex items-center p-2.5 rounded-lg text-sm" aria-label="Instagram"><svg class="h-5 w-5" data-icon="tabler:brand-instagram" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:brand-instagram"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M4 8a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H8a4 4 0 0 1-4-4z"/><path d="M9 12a3 3 0 1 0 6 0a3 3 0 1 0-6 0m7.5-4.5v.01"/></g></symbol><use xlink:href="#ai:tabler:brand-instagram"></use></svg></a></li><li><a href="/rss.xml" class="text-muted dark:text-gray-400 dark:focus:ring-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 hover:bg-gray-100 inline-flex items-center p-2.5 rounded-lg text-sm" aria-label="RSS"><svg class="h-5 w-5" data-icon="tabler:rss" height="1em" viewBox="0 0 24 24" width="1em"><symbol id="ai:tabler:rss"><path d="M4 19a1 1 0 1 0 2 0a1 1 0 1 0-2 0M4 4a16 16 0 0 1 16 16M4 11a9 9 0 0 1 9 9" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></symbol><use xlink:href="#ai:tabler:rss"></use></svg></a></li></ul><div class="dark:text-muted mr-4 text-sm"><span class="h-5 w-5 bg-[url(/favicon.ico)] bg-cover float-left md:-mt-0.5 md:h-6 md:w-6 mr-1.5 rounded-sm rtl:float-right rtl:ml-1.5 rtl:mr-0"></span> Copyright &copy; 2024 PageKey Solutions, LLC ¬∑ All rights reserved.</div></div></div></footer><script>!function(){const e="system";if(window.basic_script)return;function t(e){"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}window.basic_script=!0;const d=function(){e&&e.endsWith(":only")||(localStorage.theme,0)?t(e.replace(":only","")):"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):t("light")};function a(e,t,d){const a="string"==typeof e?document.querySelectorAll(e):e;a&&a.length&&a.forEach((e=>{e.addEventListener(t,(t=>d(t,e)),!1)}))}d();const o=function(){let t=window.scrollY,d=!0;function o(){const e=document.querySelector("#header[data-aw-sticky-header]");t>60&&!e.classList.contains("scroll")?document.getElementById("header").classList.add("scroll"):t<=60&&e.classList.contains("scroll")&&document.getElementById("header").classList.remove("scroll"),d=!1}a("#header nav","click",(function(){document.querySelector("[data-aw-toggle-menu]")?.classList.remove("expanded"),document.body.classList.remove("overflow-hidden"),document.getElementById("header")?.classList.remove("h-screen"),document.getElementById("header")?.classList.remove("expanded"),document.getElementById("header")?.classList.remove("bg-page"),document.querySelector("#header nav")?.classList.add("hidden"),document.querySelector("#header > div > div:last-child")?.classList.add("hidden")})),a("[data-aw-toggle-menu]","click",(function(e,t){t.classList.toggle("expanded"),document.body.classList.toggle("overflow-hidden"),document.getElementById("header")?.classList.toggle("h-screen"),document.getElementById("header")?.classList.toggle("expanded"),document.getElementById("header")?.classList.toggle("bg-page"),document.querySelector("#header nav")?.classList.toggle("hidden"),document.querySelector("#header > div > div:last-child")?.classList.toggle("hidden")})),a("[data-aw-toggle-color-scheme]","click",(function(){e.endsWith(":only")||(document.documentElement.classList.toggle("dark"),localStorage.theme=document.documentElement.classList.contains("dark")?"dark":"light")})),a("[data-aw-social-share]","click",(function(e,t){const d=t.getAttribute("data-aw-social-share"),a=encodeURIComponent(t.getAttribute("data-aw-url")),o=encodeURIComponent(t.getAttribute("data-aw-text"));let n;switch(d){case"facebook":n=`https://www.facebook.com/sharer.php?u=${a}`;break;case"twitter":n=`https://twitter.com/intent/tweet?url=${a}&text=${o}`;break;case"linkedin":n=`https://www.linkedin.com/shareArticle?mini=true&url=${a}&title=${o}`;break;case"whatsapp":n=`https://wa.me/?text=${o}%20${a}`;break;case"mail":n=`mailto:?subject=%22${o}%22&body=${o}%20${a}`;break;default:return}const c=document.createElement("a");c.target="_blank",c.href=n,c.click()})),window.matchMedia("(max-width: 767px)").addEventListener("change",(function(){document.querySelector("[data-aw-toggle-menu]")?.classList.remove("expanded"),document.body.classList.remove("overflow-hidden"),document.getElementById("header")?.classList.remove("h-screen"),document.getElementById("header")?.classList.remove("expanded"),document.getElementById("header")?.classList.remove("bg-page"),document.querySelector("#header nav")?.classList.add("hidden"),document.querySelector("#header > div > div:last-child")?.classList.add("hidden")})),o(),a([document],"scroll",(function(){t=window.scrollY,d||(window.requestAnimationFrame((()=>{o()})),d=!0)}))},n=function(){document.documentElement.classList.add("motion-safe:scroll-smooth");const e=document.querySelector("[data-aw-toggle-menu]");e&&e.classList.remove("expanded"),document.body.classList.remove("overflow-hidden"),document.getElementById("header")?.classList.remove("h-screen"),document.getElementById("header")?.classList.remove("expanded"),document.querySelector("#header nav")?.classList.add("hidden")};window.onload=o,window.onpageshow=n,document.addEventListener("astro:after-swap",(()=>{d(),o(),n()}))}()</script><script type="module">import mermaid from"https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";async function renderDiagrams(e){mermaid.initialize({startOnLoad:!1,fontFamily:"var(--sans-font)",theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"default"});for(const m of e){const e=m.querySelector(".mermaid-src").innerText;if(!e)continue;let r=document.createElement("svg");const a=r.id="mermaid-"+Math.round(1e5*Math.random());m.appendChild(r),mermaid.render(a,e).then((e=>{m.innerHTML=e.svg}))}}const graphs=document.getElementsByClassName("mermaid");document.getElementsByClassName("mermaid").length>0&&renderDiagrams(graphs)</script></body></html><script async src="https://www.googletagmanager.com/gtag/js?id=G-LCGN32XDMX"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LCGN32XDMX")</script>