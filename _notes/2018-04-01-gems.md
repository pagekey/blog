Creating Your First Ruby Gem

Making Gems - Easier than you think!
Ruby and Gems - A Quickstart

Making a Command Line Interface as a Ruby Gem
How to Give Your Ruby Gem a CLI
Making Ruby Gems Accessible via Command Line Interface

Gems are the way Ruby code is packaged up and distributed to people everywhere for easy reuse. It's easy to make your first gem, and even easier to reuse someone else's! Thousands upon thousands of gems are available on [RubyGems.org](http://www.rubygems.org), packaged and ready to solve your problems.

In this article, we're going to do two things. First, we're going to get started by creating our first gem and pushing it to RubyGems so that everyone can use it. Then, we're going to modify the gem so that you can use it anywhere on your computer, just by typing its name into the console. Sweet!

# Requirements

In order to complete this tutorial, you'll need an installed version of Ruby on your computer. If you don't already have it installed, consider first installing [RVM](https://rvm.io/), and then selecting the version you want. For the record, I used Ruby version `2.3.3p200` in the creation of this tutorial. As long as your version at least somewhat recent, you should be fine.

Note that this tutorial was created using Ubuntu Linux ([on Windows](https://docs.microsoft.com/en-us/windows/wsl/install-win10)). I'm sure there's a way to accomplish this using only Windows, but I have to leave that for you to figure out.

# Setting Up the Gem

Let's start by creating the intial file stucture of our gem. Create an empty directory and `cd` to it. For this tutorial, I'll be making the `pagekey` gem. When you make yours, be sure to use a unique name that's not already taken on [RubyGems.org](http://www.rubygems.org).

```
mkdir pagekey
cd pagekey
```

The skeleton of our gem will consist of a `.gemspec` file to specify the gem configuration, a `lib` folder to hold our source, and of course our first source file. I'll create these now:

```
touch pagekey.gemspec
mkdir lib
touch lib/pagekey.rb
```

Now I'll edit `pagekey.gemspec` and include some information about our gem. Remember to update this with information specific to your own gem.

{% highlight ruby %}
Gem::Specification.new do |s|
  s.name      = 'pagekey'
  s.version   = '0.0.0'
  s.platform  = Gem::Platform::RUBY
  s.summary   = 'PageKeySolutions tutorial gem'
  s.description = "Created in a tutorial found on PageKeySolutions.com. Doesn't do too much!"
  s.authors   = ['Steve Grice']
  s.email     = ['steve@pagekeysolutions.com']
  s.homepage  = 'http://rubygems.org/gems/pagekey'
  s.license   = 'MIT'
  s.files     = Dir.glob("lib/**/*") # This includes all files under the directory, so we don't have to add each one individually. TODO[remove this]**
  s.require_path = 'lib'
end
{% endhighlight %}

Perfect. Now that the gem is configured, let's add some really basic code and test it out. Next, I'll edit `lib/pagekey.rb`:

{% highlight ruby %}
module PageKey
  def hello_world
    "Good morning world and all who inhabit it!"
  end
end
{% endhighlight %}

Excellent. We're all set up on the code site. Now we can leverage the wonderfully streamlined gem workflow to build and test it! Watch how easy it is...

# Building and Testing

Package everything up, we will provide our `.gemspec` file as the only input:

```
gem build pagekey.gemspec
```

If all goes well, you'll see:

```
Successfully built RubyGem
Name: pagekey
Version: 0.0.0
File: pagekey-0.0.0.gem
```

So, install it!

```
gem install ./pagekey-0.0.0.gem
```

It's installed. Time for the moment of truth. We can test it on `irb`, the interactive ruby console. Type `irb` and it will start the interpreter.

```
> require 'pagekey'
 => true
> PageKey::hello_world
 => "Good morning world and all who inhabit it!"
```

Wonderful. It works as expected.

# Adding the CLI

Right now, if I type `pagekey`, I'll get some angry message like `pagekey: command not found`. This isn't good - I want to use my gem just like any other program!

In order to make this gem available under a specific command, we'll have to create an **executable** and link to it in our `.gemspec` file.

The executable will basically be a short Ruby script that accepts command line arguments and routes them to the gem's code in `./lib`.

```

```

After writing the executable, we need to specify it in our `.gemspec` so that it will be added to the system PATH variable when the gem is installed.

```

```

# Pushing and Publishing

There you have it. A beautiful gem, ready to go. But, until it's in the open air, I daresay it's nothing but a diamond in the rough. Let's get this thing in out there in the real world.

To begin, we'll

# Wrapping Up
